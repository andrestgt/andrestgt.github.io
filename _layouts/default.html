<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} Â· {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent: #1a4fd8;
      --text-muted: #666;
      --rule: #e5e5e5;
      --content-max: 820px;
      --hero-mobile-height: 56vh;
      --hero-desktop-height: 100vh; /* desktop = full viewport */
      --hero-overlay: rgba(0,0,0,0.35);
      --read-full-blue: #1a4fd8;
    }

    html,body { height: 100%; }

    /* ---------------------------
       GLOBAL BASE
       --------------------------- */

    body {
      font-family: "Source Serif 4", Georgia, serif;
      max-width: var(--content-max);
      margin: 3rem auto;
      padding: 0 1.5rem;
      line-height: 1.7;
      background: #fff;
      color: #111;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    h1,h2,h3 { font-family: "Inter", system-ui, sans-serif; margin: 0 0 .6rem 0; }
    h1 { border-bottom: 2px solid var(--rule); padding-bottom: .4rem; margin-bottom: 1.2rem; }

    p { margin: 1.2rem 0; }

    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    img { max-width: 100%; height: auto; display: block; margin: 1.5rem auto; border-radius: 6px; }

    figure { margin: 1.5rem auto; text-align: center; }
    figcaption { font-size: .85rem; color: var(--text-muted); margin-top: .4rem; }

    /* default nav (in-flow). Will be repositioned for hero pages via body class selectors */
    nav.site-nav {
      border-bottom: 1px solid var(--rule);
      padding: .6rem 0 .8rem;
      margin-bottom: 2.5rem;
      text-align: right;
      position: relative;
      z-index: 30;
      background: transparent;
    }

    nav.site-nav a {
      font-family: "Inter", system-ui, sans-serif;
      font-size: .95rem;
      margin-left: 1rem;
      color: #333;
    }

    main#top {
      max-width: var(--content-max);
      margin: 0 auto;
      padding: 1rem 0 4rem;
      position: relative;
      z-index: 40;
      background: transparent;
    }

    hr { border: none; height: 1px; background: var(--rule); margin: 1.2rem 0; }

    /* ---------------------------
       HERO / BACKGROUND (full-bleed)
       --------------------------- */

    .site-hero {
      position: relative;

      /* full-bleed: span the viewport width even inside constrained container */
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
      width: 100vw;

      /* height */
      min-height: var(--hero-mobile-height);

      display: flex;
      align-items: center;
      justify-content: flex-start;
      box-sizing: border-box;
      overflow: hidden;
      color: #fff;
      background-color: #000;
      background-position: center center;
      background-repeat: no-repeat;
      background-size: cover;
      background-attachment: scroll;
      z-index: 10;
    }

    .site-hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--hero-overlay);
      pointer-events: none;
      z-index: 5;
    }

    .hero-inner {
      width: 100%;
      max-width: var(--content-max);
      padding: 2.5rem 1.5rem;
      margin: 0 auto;
      position: relative;
      z-index: 10;
      box-sizing: border-box;
    }

    /* page content area */
    .page-body {
      max-width: var(--content-max);
      margin: 2rem auto;
      padding: 0 1.5rem 4rem;
      background: transparent;
      color: inherit;
      position: relative;
      z-index: 20;
    }

    /* restaurant review pages should retain the locked non-hero layout */
    body.food.food-review {
      background: #fff !important;
      color: #111 !important;
      max-width: var(--content-max);
      margin: 3rem auto;
      padding: 0 1.5rem;
    }
    /* ensure nav on review pages stays in-flow and dark */
    body.food.food-review nav.site-nav {
      position: relative;
      border-bottom: 1px solid var(--rule);
    }
    body.food.food-review nav.site-nav a { color: #333; }

    /* ---------------------------
       HERO IMAGE ASSIGNMENTS (by body class)
       --------------------------- */

    body.food.index .site-hero { background-image: url("/photos/background/food.jpg"); }
    body.food.food-country.thailand .site-hero       { background-image: url("/photos/background/foodthailand.jpg"); }
    
    /* City landing pages (general) */
    body.food.food-city.chiang-mai .site-hero        { background-image: url("/photos/background/foodthaicm.png"); }
    body.food.food-city.chiang-rai .site-hero        { background-image: url("/photos/background/foodthaicr.jpg"); }
    body.food.food-city.phuket-town .site-hero       { background-image: url("/photos/background/foodthaipt.jpg"); }
    body.food.food-city.around-phuket .site-hero     { background-image: url("/photos/background/foodthaiap.jpg"); }
    body.food.food-city.koh-samui .site-hero         { background-image: url("/photos/background/foodks.jpg"); }
    body.food.food-city.bangkok .site-hero           { background-image: url("/photos/background/foodthaibkk.jpg"); }
    
    /* Category pages (general - fallback) */
    body.food.food-category.basic-eateries .site-hero{ background-image: url("/photos/background/cmbasic.jpg"); }
    body.food.food-category.restaurants .site-hero   { background-image: url("/photos/background/ptrestaurants.jpg"); }
    body.food.food-category.cafes .site-hero         { background-image: url("/photos/background/ptcafes.jpg"); }
    
    /* Around Phuket category pages */
    body.around-phuket.cafes .site-hero { background-image: url("/photos/background/apcafes.jpg") !important; }
    body.around-phuket.restaurants .site-hero { background-image: url("/photos/background/aprestaurants.jpg") !important; }
    body.around-phuket.street-food .site-hero { background-image: url("/photos/background/apstreetfood.jpg") !important; }
    body.around-phuket.bars-pubs .site-hero { background-image: url("/photos/background/apbars.jpg") !important; }
    
    /* Koh Samui category pages */
    body.koh-samui.cafes .site-hero { background-image: url("/photos/background/kscafes.jpg") !important; }
    body.koh-samui.restaurants .site-hero { background-image: url("/photos/background/ksrestaurants.jpg") !important; }
    body.koh-samui.street-food .site-hero { background-image: url("/photos/background/ksbasic.jpg") !important; }
    body.koh-samui.bars-pubs .site-hero { background-image: url("/photos/background/ksbars.jpg") !important; }
    
    /* Bangkok category pages */
    body.bangkok.cafes .site-hero { background-image: url("/photos/background/bkkcafes.jpg") !important; }
    body.bangkok.restaurants .site-hero { background-image: url("/photos/background/bkkrestaurants.jpg") !important; }
    body.bangkok.street-food .site-hero { background-image: url("/photos/background/bkkbasic.jpg") !important; }
    body.bangkok.bars-pubs .site-hero { background-image: url("/photos/background/bkkbars.jpg") !important; }
    
    /* Chiang Rai category pages */
    body.chiang-rai.cafes .site-hero { background-image: url("/photos/background/crcafes.jpg") !important; }
    body.chiang-rai.restaurants .site-hero { background-image: url("/photos/background/crrestaurants.jpg") !important; }
    body.chiang-rai.street-food .site-hero { background-image: url("/photos/background/crbasic.jpg") !important; }

    /* travels index uses same hero system */
    body.travels.index .site-hero { background-image: url("/photos/background/travelogues.jpg"); }

    /* default hero text/link colour */
    body.food.food-country .hero-inner,
    body.food.food-city .hero-inner,
    body.food.food-category .hero-inner,
    body.food.index .hero-inner,
    body.travels.index .hero-inner {
      color: #fff;
    }
    body.food.food-country .hero-inner a,
    body.food.food-city .hero-inner a,
    body.food.food-category .hero-inner a,
    body.food.index .hero-inner a,
    body.travels.index .hero-inner a {
      color: #fff;
    }

    /* ---------------------------
       NAV: float visually over hero only for hero pages
       Use body class selectors so review pages keep normal nav.
       --------------------------- */

    /* hero nav (floating) */
    body.food.index nav.site-nav,
    body.food.food-country nav.site-nav,
    body.food.food-city nav.site-nav,
    body.food.food-category nav.site-nav,
    body.travels.index nav.site-nav {
      position: absolute;
      top: 1.1rem;
      right: 1.5rem;
      left: auto;
      text-align: right;
      border-bottom: none;
      z-index: 30;
      background: transparent;
      padding: 0;
      margin: 0;
    }
    body.food.index nav.site-nav a,
    body.food.food-country nav.site-nav a,
    body.food.food-city nav.site-nav a,
    body.food.food-category nav.site-nav a,
    body.travels.index nav.site-nav a {
      color: #fff;
    }

    /* ---------------------------
       REMOVE LINES/FRAMES INSIDE HERO
       --------------------------- */

    .site-hero *,
    .site-hero *::before,
    .site-hero *::after {
      border: none !important;
      box-shadow: none !important;
      outline: none !important;
      background-image: none !important;
      background-color: transparent !important;
    }

    .site-hero h1, .site-hero h2, .site-hero h3 {
      border: none !important;
      padding-bottom: 0 !important;
      margin-bottom: .4rem !important;
      background: transparent !important;
    }

    .site-hero nav { border: none !important; background: transparent !important; box-shadow: none !important; }

    .site-hero figure, .site-hero figcaption { border: none !important; box-shadow: none !important; background: transparent !important; color: inherit; }

    /* Hide hero on pages without background images (review/about pages) */
    body:not(.food.index):not(.food.food-country):not(.food.food-city):not(.food.food-category):not(.travels.index) .site-hero {
      display: none;
    }

    /* Ensure nav is normal (not floating) on non-hero pages */
    body:not(.food.index):not(.food.food-country):not(.food.food-city):not(.food.food-category):not(.travels.index) nav.site-nav {
      position: relative;
      top: auto;
      right: auto;
      border-bottom: 1px solid var(--rule);
    }

    body:not(.food.index):not(.food.food-country):not(.food.food-city):not(.food.food-category):not(.travels.index) nav.site-nav a {
      color: #333;
    }

    /* ---------------------------
       DESKTOP IMPROVEMENTS
       --------------------------- */

    @media (min-width: 1024px) {
      
      /* 1. Better content width for readability */
      body {
        max-width: 900px;
        padding: 0 3rem;
        margin: 3rem auto;
      }

      /* 2. Improved hero - taller to show more of the image */
      .site-hero {
        min-height: 90vh; /* increased to show more of the image */
        background-size: cover;
        background-position: center center;
        background-attachment: fixed; /* parallax effect */
      }

      /* 3. Better hero text positioning */
      .hero-inner {
        max-width: 800px;
        padding: 3rem 4rem;
      }

      /* 4. Hero typography scaling */
      .hero-inner h1 {
        font-size: 2.8rem;
        line-height: 1.2;
        margin-bottom: 1rem;
      }

      .hero-inner .subtitle {
        font-size: 1.3rem;
        line-height: 1.6;
      }

      /* 5. Navigation improvements - better positioning */
      body.food.index nav.site-nav,
      body.food.food-country nav.site-nav,
      body.food.food-city nav.site-nav,
      body.food.food-category nav.site-nav,
      body.travels.index nav.site-nav {
        top: 3rem;
        right: 3rem;
      }

      body.food.index nav.site-nav a,
      body.food.food-country nav.site-nav a,
      body.food.food-city nav.site-nav a,
      body.food.food-category nav.site-nav a,
      body.travels.index nav.site-nav a {
        font-size: 1rem;
        margin-left: 1.5rem;
        font-weight: 500;
      }

      /* 6. Page content improvements */
      .page-body {
        padding: 0 3rem 5rem;
        margin-top: 3rem;
      }

      .page-body h1 {
        font-size: 2.2rem;
      }

      .page-body h2 {
        font-size: 1.6rem;
        margin-top: 2.5rem;
      }

      .page-body h3 {
        font-size: 1.3rem;
        margin-top: 2rem;
      }

      .page-body p {
        font-size: 1.05rem;
        line-height: 1.8;
        margin: 1.4rem 0;
      }

      /* 7. Review pages - constrain width */
      body.food.food-review {
        max-width: 800px;
        padding: 0 3rem;
      }

      body.food.food-review main#top {
        padding: 2rem 0 5rem;
      }

      /* Hide hero on non-hero pages on desktop */
      body.food.food-review .site-hero {
        display: none;
      }

      /* Ensure nav stays visible and dark on review pages */
      body.food.food-review nav.site-nav {
        position: relative;
        top: auto;
        right: auto;
        border-bottom: 1px solid var(--rule);
        padding: .6rem 0 .8rem;
        margin-bottom: 2.5rem;
      }

      body.food.food-review nav.site-nav a {
        color: #333;
      }

      /* 8. Images - better sizing */
      img {
        border-radius: 8px;
      }

      figure {
        margin: 2.5rem auto;
      }

      figcaption {
        font-size: 0.9rem;
        margin-top: 0.6rem;
      }

      /* 9. Travelogue country blocks - better spacing */
      .travelogue .country {
        padding: 2.5rem 3rem;
        margin: 4rem 0;
        border-radius: 16px;
      }

      /* 10. Culinary sections */
      body.travelogue .culinary .place {
        padding: 1.2rem 1.5rem;
        margin: 1.5rem 0;
      }

      /* 11. Photo rows - optimal width */
      body.travelogue .photo-row {
        max-width: 100%;
        gap: 1.5rem;
        margin: 3rem 0;
      }

      body.travelogue .photo-row img {
        border-radius: 10px;
      }
    }

    /* ---------------------------
       LARGE DESKTOP (1400px+)
       --------------------------- */

    @media (min-width: 1400px) {
      
      /* Limit max width on very large screens */
      body {
        max-width: 1000px;
      }

      .hero-inner {
        max-width: 900px;
        padding-left: 5rem;
      }

      .hero-inner h1 {
        font-size: 3.2rem;
      }

      .hero-inner .subtitle {
        font-size: 1.4rem;
      }

      .page-body p {
        font-size: 1.1rem;
        line-height: 1.85;
      }
    }

    /* ---------------------------
       MOBILE
       --------------------------- */

    @media (max-width: 600px) {
      body { margin: 0; padding: 0; }
      .site-hero { min-height: 44vh; left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw; width: 100vw; }
      .hero-inner { padding: 1.6rem; }
      nav.site-nav { text-align: left; padding: .6rem 1.5rem; position: relative; top: auto; right: auto; }
      main#top { padding-top: 1rem; }
      .page-body { margin: 0.8rem 0 3rem; padding: 0 1.2rem; }
    }

    /* ---------------------------
       "Read the full review" link style
       --------------------------- */

    a.read-full {
      color: var(--read-full-blue) !important;
      font-weight: 600;
      text-decoration: none;
    }
    a.read-full:hover { text-decoration: underline; }

  </style>

  {% seo %}
</head>

<body class="
  {{ page.section }}
  {% if page.index %} index{% endif %}
  {% if page.country %} food-country{% endif %}
  {% if page.city %} food-city{% endif %}
  {% if page.category %} food-category{% endif %}
  {% if page.review %} food-review{% endif %}
  {% if page.slug %} {{ page.slug }}{% endif %}
">

  <!-- Nav (kept outside hero so review pages keep normal flow).
       Visual float is controlled by the CSS body-class selectors above. -->
  <nav class="site-nav">
    <a href="/">Home</a>
    <a href="/travels/">Travels</a>
    <a href="/food/">Food</a>
    <a href="/about/">About</a>
  </nav>

  <!-- HERO: rendered only when this is not a review or about page -->
  {% unless page.review or page.section == 'about' %}
  <header class="site-hero" role="banner" aria-label="Page hero">
    <div class="hero-inner">
      {% if page.title %}
        <h1>{{ page.title }}</h1>
      {% endif %}
      {% if page.subtitle %}
        <p class="subtitle">{{ page.subtitle }}</p>
      {% endif %}
    </div>
  </header>
  {% endunless %}

  <!-- main content -->
  <main id="top" class="page-body" role="main">
    {{ content }}
  </main>

  <!-- Tiny script: detect "Read the full review" links and add .read-full class on restaurants/cafes landing pages -->
  <script>
    (function () {
      var body = document.body;
      if (!body) return;

      var isLanding = body.classList.contains('food-category');
      var isRestaurantsLanding = isLanding && (body.className.indexOf('restaurants') !== -1);
      var isCafesLanding = isLanding && (body.className.indexOf('cafes') !== -1);

      if (!(isRestaurantsLanding || isCafesLanding)) return;

      var anchors = Array.prototype.slice.call(document.querySelectorAll('a'));
      var matches = [
        'read the full review',
        'read full review',
        'read the review',
        'read review',
        'read the full article',
        'read more'
      ];

      anchors.forEach(function(a){
        if (!a || !a.textContent) return;
        var txt = a.textContent.trim().toLowerCase();
        for (var i=0;i<matches.length;i++){
          if (txt === matches[i] || txt.indexOf(matches[i]) !== -1) {
            a.classList.add('read-full');
            break;
          }
        }
      });
    })();
  </script>

</body>
</html>
